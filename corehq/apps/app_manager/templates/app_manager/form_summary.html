{% extends 'app_manager/base_summary.html' %}
{% load hq_shared_tags %}
{% load i18n %}
{% load xforms_extras %}

{% block js %}{{ block.super }}
    <script src="{% static "app_manager/js/summary/utils.js" %}"></script>
    <script src="{% static "app_manager/js/summary/form_summary.js" %}"></script>
{% endblock js %}

{% block navigation_extra %}
    <li role="presentation">
        <div class="appnav-item" data-bind="click: selectAll, css: { active: viewAllSelected }">
            <a class="appnav-link-full">
              <i class="fa fa-search appnav-primary-icon"></i>
              <span data-bind="text: viewAllItems"></span>
            </a>
        </div>
    </li>
    <!-- ko foreach: items -->
        <li role="presentation">
        <div class="appnav-item" data-bind="click: $root.select, css: { active: isSelected }">
                <a class="appnav-link-full">
                    <i data-bind="attr: { 'class': $data.icon }"></i>
                    <span data-bind="text: name"></span>
                </a>
            </div>
            <!-- ko foreach: subitems -->
                <ul class="appnav-menu appnav-menu-nested">
                    <li>
                        <div class="appnav-item" data-bind="click: $root.select, css: { active: isSelected }">
                            <a class="appnav-link-full">
                                <i data-bind="attr: { 'class': $data.icon }"></i>
                                <span data-bind="text: name"></span>
                            </a>
                        </div>
                    </li>
                </ul>
            <!-- /ko -->
        </li>
    <!-- /ko -->
{% endblock navigation_extra %}

{% block content_extra %}
    {% initial_page_data 'lang' lang %}
    {% initial_page_data 'langs' langs %}
    {% initial_page_data 'modules' modules %}
    {% registerurl 'form_source' domain app_id '---' %}
    {% registerurl 'view_module' domain app_id '---' %}

    <div class="page-header" style="margin-top: 0;">
        <h3>
          <i class="fa fa-file-text-o"></i>
          {% trans "Form Summary" %}</h1>
        </h3>
        <div class="row">
            <div class="col-xs-9">
                <div class="btn-toolbar pull-right" role="toolbar">
                    <a class="btn btn-primary" href="{% url "download_form_summary" domain app_id %}?lang={{ lang }}">
                        <i class="fa fa-download"></i>
                        {% trans "Download" %}
                    </a>
                </div>
             </div>
        </div>
    </div>

    <ul>
        <!-- ko foreach: modules -->
            <li data-bind="visible: isSelected">
                <h4>
                    <a data-bind="attr: { href: url }">
                        <i data-bind="attr: { 'class': icon }"></i>
                        <span data-bind="text: name"></span>
                    </a>
                </h4>
                <ul>
                    <!-- ko foreach: forms -->
                        <li data-bind="visible: isSelected">
                            <h5>
                                <a data-bind="attr: { href: url }">
                                    <i data-bind="attr: { 'class': icon }"></i>
                                    <span data-bind="text: name"></span>
                                </a>
                            </h5>
                        </li>
                    <!-- /ko -->
                </ul>
            </li>
        <!-- /ko -->
    </ul>
{% endblock content_extra %}
